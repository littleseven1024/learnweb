<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>啦啦啦</title>
    </head>
    <body>
        <div id="fade-obj" style="width:300px;height:300px;background:#000"></div>
        <button id="fade-btn">淡出</button>

        <script>
            var btn = document.getElementById("fade-btn");
            var obj = document.getElementById("fade-obj");
            var opacity = 1;

            function xiaoshi() {
                if (opacity > 0) {
                    var t = setInterval(xiaoshi, 100);
                    opacity = opacity - 0.1;
                    console.log(opacity);
                    obj.style.opacity = opacity;
                    btn.disabled = true;
                }
                else if (opacity <= 0){
                    clearInterval(t);
                    btn.disabled = false;
                    btn.innerHTML = "淡入";
                    btn.addEventListener("click", huifu);
                    btn.removeEventListener("click", xiaoshi);
                }
                 
            }


            function huifu() {
                if (opacity < 1) {
                    var h = setInterval(huifu, 100);
                    opacity = opacity + 0.1;
                    console.log(opacity);
                    obj.style.opacity = opacity;
                    btn.disabled = true;
                    
                } else if (opacity >= 1) {
                    clearInterval(h);
                    btn.disabled = false;
                    btn.innerHTML = "淡出";
                    btn.addEventListener("click", xiaoshi);
                    btn.removeEventListener("click", huifu);
                }
            }

            btn.addEventListener("click", xiaoshi);
        </script>
    </body>
</html>